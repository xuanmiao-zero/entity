<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Commodity statistics</title>
    <style>
        body{
            background: url("../../img/background/5.jpg") no-repeat;
            background-size: 100% 1000px;
        }
        #container{
            width:500px;
            margin: 100px auto;
            user-select: none;
        }

        .top{
            position: absolute;
            z-index: 1;

            margin:-16px 0;
            border-top: 2px solid #A9A9A9;
            border-radius: 40px;
            width: 500px;
            height:100px;

            background: linear-gradient(90deg, rgba(0,0,0,1) 0%,
                    rgba(255,255,255,1) 3%, rgba(93,93,93,1) 9%,
                    rgba(93,93,93,1) 91%,rgba(255,255,255,1) 97%,
                    rgba(0,0,0,1) 100%);
        }

        #statistics{
            overflow: hidden;

            position: relative;
            z-index: 2;

            border-top: 2px solid #C0BFBF;
            border-radius: 40px;
            width: 500px;
            height: 600px;

            background: #292B2A;
            color: #6A6A6A;

        }

        #statistics .oper-inter{

            height:440px;
        }

        #statistics .result{

            height: 160px;

            background: rgba(29,29,29,1);
        }

        #statistics .oper-inter .logo{

            font: 900 22px/80px "Adobe 黑体 Std R";
            text-align: center;

            color: #0a8cd2;
        }
        #statistics ul{
            list-style: none;
            padding: 0;
        }
        #statistics .commodity{
            display: flex;
            justify-content:space-around;
            margin: 25px 30px;
            height:40px;
            line-height: 40px;
            text-align: center;
        }
        #statistics .commodity .sub,#statistics .commodity .add{
            border-radius: 5px;
            border: 1px outset #979291;
            width: 50px;
            height:40px;

            font-size: 30px;
            line-height:40px;

            color: #fff;
            background: #212121;

            cursor: pointer;
        }
        #statistics .commodity .number{
            margin:auto 14px;
            border-radius: 5px;
            border:  1px outset transparent;
            width: 50px;
            line-height:40px;

            background-color: #fff;
            color: #000;
        }
        #statistics .commodity .info{
            border-radius: 8px;
            border: 1px inset transparent;
            width:280px;
            overflow: hidden;
            line-height:40px;
            margin-left: 30px;

            background: #171717;
        }
        .result{
            padding: 20px 10px ;
        }
        .result p{
            margin: 20px;
            letter-spacing: 2px;
        }
        .result p strong{
            border-radius: 5px;
            padding: 5px;

            background-color: #fff;
        }
    </style>
</head>
<body>
    <div id="container">
        <div class="top"></div>
        <div id="statistics">
            <div class="oper-inter">
                <div class="logo">
                    xuanmiao.com
                </div>
                <ul class="oper-btns">
                    <li class="commodity">
                        <div class="sub">-</div>
                        <div class="number">0</div>
                        <div class="add">+</div>
                        <div class="info">单价：&nbsp12.5元&nbsp&nbsp&nbsp小计：
                            <strong class="subtotal">&nbsp&nbsp&nbsp&nbsp&nbsp</strong>
                            元
                        </div>
                    </li>
                    <li class="commodity">
                        <div class="sub">-</div>
                        <div class="number">0</div>
                        <div class="add">+</div>
                        <div class="info">单价：&nbsp10.5元&nbsp&nbsp&nbsp小计：
                            <strong class="subtotal">&nbsp&nbsp&nbsp&nbsp&nbsp</strong>
                            元
                        </div>
                    </li>
                    <li class="commodity">
                        <div class="sub">-</div>
                        <div class="number">0</div>
                        <div class="add">+</div>
                        <div class="info">单价：&nbsp8.5元&nbsp&nbsp&nbsp小计：
                            <strong class="subtotal">&nbsp&nbsp&nbsp&nbsp&nbsp</strong>
                            元
                        </div>
                    </li>
                    <li class="commodity">
                        <div class="sub">-</div>
                        <div class="number">0</div>
                        <div class="add">+</div>
                        <div class="info">单价：&nbsp8元&nbsp&nbsp&nbsp小计：
                            <strong class="subtotal">&nbsp&nbsp&nbsp&nbsp&nbsp</strong>
                            元
                        </div>
                    </li>
                    <li class="commodity">
                        <div class="sub">-</div>
                        <div class="number">0</div>
                        <div class="add">+</div>
                        <div class="info">单价：&nbsp14.5元&nbsp&nbsp&nbsp小计：
                            <strong class="subtotal">&nbsp&nbsp&nbsp&nbsp&nbsp</strong>
                            元
                        </div>
                    </li>
                </ul>
            </div>
            <div class="result">
                <p>
                    商品共合计：
                    &nbsp<strong class="total-number">&nbsp&nbsp&nbsp&nbsp</strong>&nbsp
                    件&nbsp&nbsp共花费了：
                    &nbsp<strong class="total-price">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</strong>&nbsp
                    元
                </p>
                <p>
                    其中最贵的商品单价是：
                    &nbsp<strong class="most-expen-price">&nbsp&nbsp&nbsp</strong>&nbsp
                    元
                </p>
            </div>
        </div>
    </div>


<script>
    var subBtns = document.querySelectorAll('.sub');
    var numberBtns = document.querySelectorAll('.number');
    var addBtns = document.querySelectorAll('.add');
    var subTotal = document.querySelectorAll('.subtotal');
    var totalNumber = document.querySelector('.total-number');
    var totalPrice = document.querySelector('.total-price');
    var mostExpenPrice = document.querySelector('.most-expen-price');
    //声明变量
    var commoditys = [0,0,0,0,0];
    var unitPrice = [12.5,10.5,8.5,8,14.5];
    var totalNum  = 0;
    var totalPriceVar = 0;
    var mostExpenPriceVar = 0;
    for(var i = 0; i < subBtns.length; i ++){
        subBtns[i].index = i;
        addBtns[i].index = i;
        subBtns[i].onclick = function () {
            if(commoditys[this.index] > 0)  {
                numberBtns[this.index].innerHTML = --commoditys[this.index];
                subTotal[this.index].innerHTML = unitPrice[this.index] * commoditys[this.index];
            }
            totalNum > 0 ?totalNum --:0;
            totalNumber.innerHTML = totalNum;
            totalPriceVar > 0 ?totalPriceVar -= unitPrice[this.index]:0;
            totalPrice.innerHTML = totalPriceVar;
            findExpPrice();
        };
        addBtns[i].onclick = function () {
            numberBtns[this.index].innerHTML = ++commoditys[this.index];
            subTotal[this.index].innerHTML = unitPrice[this.index] * commoditys[this.index];
            totalNum ++;
            totalNumber.innerHTML = totalNum;
            totalPriceVar += unitPrice[this.index];
            totalPrice.innerHTML = totalPriceVar;
            findExpPrice();
        };
    }
    function findExpPrice() {
        mostExpenPriceVar =0;
        for(var i = 0 ; i < unitPrice.length; i ++){
            if(commoditys[i]){
                console.log(commoditys[i]);
                if(mostExpenPriceVar < unitPrice[i])
                    mostExpenPriceVar = unitPrice[i];
            }
        }
        mostExpenPrice.innerHTML = mostExpenPriceVar;
    }

</script>
</body>
</html>