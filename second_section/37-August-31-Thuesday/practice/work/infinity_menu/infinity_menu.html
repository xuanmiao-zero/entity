<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="author" content="轩邈">
    <meta name="copyright" content="轩邈">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <!-- 网站SEO -->
    <title>Infinity Menu</title>
    <meta name="keywords" content="轩邈 xuanmiao xuanmiao.com">
    <meta name="description" content="轩邈 | 猎奇蜗牛">
    <!-- 标题栏logo图标 -->
    <link rel="icon" href="" type="image/x-icon">
    <!-- 收藏夹logo图标 -->
    <link rel="shortcut icon" href="" type="image/x-icon">
    <style>
        body,html,ul,li,h2 {
            margin: 0;
            padding: 0;
        }
        li {
            list-style: none;
        }
        .menu-list {
            position: absolute;
            left: 100px;
            top: 40px;
            border: 1px solid #000;
            padding: 0 4px;
        }
        .menu-list ul ul {
            padding-left: 30px;
            display: none;
        }
        .menu-list ul ul.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="menu-list">

    </div>
<script src="data.js"></script>
<script>
    var menuList = document.querySelector('.menu-list');
    menuList.innerHTML = createMenuList(menuData);
    //    利用数据生成所有的dom结构
    function createMenuList(data){
        var str = "<ul>";
        for(var i = 0; i < data.length; i++){
            str += '<li><h2><span>+</span>'+data[i].name+'</h2>';

            //如果说这级有子菜单那么对象之中必定有children且children长度不为零。
            if(data[i].children && data[i].children.length){
                str += createMenuList(data[i].children);
            }
            str += '</li>';
        }
        str += "</ul>";
        return str;
    }

    //---------------------
    var firstMenuList = menuList.firstElementChild;
    tabMenuList(firstMenuList);
    function tabMenuList(list){
        var childrenList = list.children;
        //给当前列表设置点击事件
        for(var i = 0; i < childrenList.length; i++){
            var caption = childrenList[i].children[0];
            //给标题添加点击事件
            caption.onclick = function () {
                var sibling = this.nextElementSibling;
                if(!sibling) return;
                var menuStatus = this.innerHTML;
                var otherList = this.parentElement.parentElement.querySelectorAll('ul');
                if(sibling.className === "active"){
                    sibling.className = "";
                    menuStatus.innerHTML = "-";
                }else{
                    //关闭同级列表
                    for(var i = 0; i < otherList.length; i++){
                        otherList[i].className = "";
                        otherList[i].previousElementSibling.firstElementChild.innerHTML = "+";
                    }
                    //打开当前列表
                    sibling.className = "active";
                    menuStatus = "-";
                    //给当前的子菜单添加事件
                    tabMenuList(sibling);
                }
            };
        }
    }
</script>
</body>
</html>